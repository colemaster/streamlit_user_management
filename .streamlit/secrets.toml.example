# Entra ID Authentication Configuration Template
# Copy this file to secrets.toml and fill in your actual values
# IMPORTANT: Never commit secrets.toml to version control!

[auth]
# Entra ID Application (Client) ID
# Found in: Azure Portal > App Registrations > Your App > Overview
client_id = "your-entra-app-client-id"

# Entra ID Application Client Secret
# Found in: Azure Portal > App Registrations > Your App > Certificates & secrets
client_secret = "your-entra-app-client-secret"

# Entra ID Tenant ID (Directory ID)
# Found in: Azure Portal > App Registrations > Your App > Overview
# Or: Azure Portal > Microsoft Entra ID > Overview
tenant_id = "your-tenant-id-guid"

# OAuth2 Redirect URI
# Must match the redirect URI configured in your Entra ID app registration
# For local development: http://localhost:8501/oauth2callback
# For production: https://your-domain.com/oauth2callback
redirect_uri = "http://localhost:8501/oauth2callback"

# Cookie Secret for session encryption
# Generate a strong random secret (e.g., using: python -c "import secrets; print(secrets.token_hex(32))")
# MUST be kept secret and should be at least 32 characters
cookie_secret = "your-strong-random-secret-at-least-32-chars"

# OIDC Metadata URL
# This URL is automatically constructed from your tenant_id
# Format: https://login.microsoftonline.com/{tenant_id}/v2.0/.well-known/openid-configuration
# Replace {tenant_id} with your actual tenant ID
server_metadata_url = "https://login.microsoftonline.com/your-tenant-id-guid/v2.0/.well-known/openid-configuration"

# Group-to-Permission Mappings
# Map Entra ID group Object IDs (OIDs) to application permission levels
# To find group OIDs: Azure Portal > Microsoft Entra ID > Groups > Select Group > Overview > Object ID
[auth.group_mappings]
# Admin permission level (highest access)
"oid-of-admin-group" = "admin"

# Analyst permission level (medium access)
"oid-of-analyst-group" = "analyst"

# Viewer permission level (read-only access)
"oid-of-viewer-group" = "viewer"

# Add additional group mappings as needed
# "another-group-oid" = "analyst"

# Configuration Notes:
# 1. Permission levels are hierarchical: admin > analyst > viewer
# 2. Users in multiple groups receive the highest permission level
# 3. Users not in any mapped group default to viewer permission
# 4. Ensure your Entra ID app has the following API permissions:
#    - Microsoft Graph > User.Read (Delegated)
#    - Microsoft Graph > GroupMember.Read.All (Application)
# 5. Streamlit version must be >= 1.42.0 for native OIDC support
